{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/workspaces/anime_website/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/workspaces/anime_website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/workspaces/anime_website/components/sidebar/search.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { FaSearch } from \"react-icons/fa\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport cheerio from \"cheerio\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\n\nvar Search = function Search() {\n  _s();\n\n  var router = useRouter();\n\n  var _useState = useState(\"\"),\n      val = _useState[0],\n      setVal = _useState[1];\n\n  var _useState2 = useState([]),\n      content = _useState2[0],\n      setContent = _useState2[1];\n\n  useEffect(function () {\n    var SearchBar = document.getElementById(\"search\");\n    var SearchInput = document.getElementById(\"searchinput\");\n    document.addEventListener(\"click\", function (event) {\n      var isClickInside = SearchBar.contains(event.target);\n\n      if (!isClickInside) {\n        SearchInput.style.maxWidth = 0;\n        SearchInput.style.marginLeft = 0;\n        setContent([]);\n        setVal(\"\");\n      }\n    });\n  }, []);\n\n  var handleSearch = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var d, myList, $;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setVal(e.target.value);\n              _context.next = 3;\n              return axios.get(\"https://ajax.gogocdn.net/site/loadAjaxSearch?keyword=\" + val);\n\n            case 3:\n              d = _context.sent;\n              d = d.data.content.replaceAll(\"category/\", \"/details/\");\n              myList = [];\n              $ = cheerio.load(d);\n              $(\"a\").each(function (index, element) {\n                var result = {};\n                var title = $(this).text();\n                var link = $(this).attr().href;\n                var image = $(this).children(\"div\").attr().style.slice(15).replace(/[(\"\")]/g, \"\");\n                result = {\n                  title: title,\n                  link: link,\n                  image: image\n                };\n                myList.push(result);\n              });\n              setContent(myList);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSearch(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleClick = function handleClick() {\n    var SearchBar = document.getElementById(\"search\");\n    var SearchInput = document.getElementById(\"searchinput\");\n    SearchInput.focus();\n    SearchInput.style.maxWidth = \"800px\";\n    SearchInput.style.marginLeft = \"0.7rem\";\n    SearchBar.style.width = \"auto\";\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    router.push(\"/search/\".concat(val, \"/1\"));\n    setContent([]);\n    setVal(\"\");\n  };\n\n  var theme = useSelector(function (state) {\n    return state.theme;\n  });\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"absolute cursor-pointer right-0\",\n    onSubmit: handleSubmit,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"\".concat(theme.button.background, \" \").concat(theme.button.text, \" h-10 w-10  rounded-full flex  p-2.5 shadow-2xl relative right-0\"),\n      id: \"search\",\n      onClick: handleClick,\n      children: [/*#__PURE__*/_jsxDEV(FaSearch, {\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: val,\n        autoComplete: \"off\",\n        onChange: handleSearch,\n        className: \"\".concat(theme.button.background, \" \").concat(theme.button.text, \" border-none outline-none max-w-0 ease-in-out transition-all duration-700\"),\n        placeholder: \"Search for anime...\",\n        id: \"searchinput\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, _this), content.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" autocomplete absolute left-0 px-1 py-0 top-11 shadow-2xl transition-all duration-200 rounded-xl \".concat(theme.button.text, \" w-full \").concat(theme.button.background),\n        children: content === null || content === void 0 ? void 0 : content.map(function (Item, index) {\n          return /*#__PURE__*/_jsxDEV(Link, {\n            href: Item.link,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex shadow-xl w-full justify-between cursor-pointer p-2 rounded-xl my-1 text-right \".concat(theme.text.selected, \" \").concat(theme.background),\n              onClick: function onClick() {\n                return setContent([]);\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rounded-full h-10 w-10 \",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: Item.image,\n                  className: \"w-10 h-10 object-cover rounded-full\",\n                  alt: Item.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 93,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"w-3/4\",\n                children: Item.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 17\n            }, _this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 15\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Search, \"Zhl69Q3bE8lOkBMcZJbZeEVqZVE=\", false, function () {\n  return [useRouter, useSelector];\n});\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/workspaces/anime_website/components/sidebar/search.js"],"names":["useEffect","useState","FaSearch","useSelector","axios","cheerio","Link","useRouter","Search","router","val","setVal","content","setContent","SearchBar","document","getElementById","SearchInput","addEventListener","event","isClickInside","contains","target","style","maxWidth","marginLeft","handleSearch","e","value","get","d","data","replaceAll","myList","$","load","each","index","element","result","title","text","link","attr","href","image","children","slice","replace","push","handleClick","focus","width","handleSubmit","preventDefault","theme","state","button","background","length","map","Item","selected"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { FaSearch } from \"react-icons/fa\";\nimport { useSelector } from \"react-redux\";\nimport axios from \"axios\";\nimport cheerio from \"cheerio\";\nimport Link from \"next/link\";\n\nimport { useRouter } from \"next/router\";\n\nconst Search = () => {\n  const router = useRouter();\n  const [val, setVal] = useState(\"\");\n  const [content, setContent] = useState([]);\n  useEffect(() => {\n    var SearchBar = document.getElementById(\"search\");\n    var SearchInput = document.getElementById(\"searchinput\");\n    document.addEventListener(\"click\", function (event) {\n      var isClickInside = SearchBar.contains(event.target);\n\n      if (!isClickInside) {\n        SearchInput.style.maxWidth = 0;\n        SearchInput.style.marginLeft = 0;\n        setContent([]);\n        setVal(\"\");\n      }\n    });\n  }, []);\n  const handleSearch = async (e) => {\n    setVal(e.target.value);\n    let d = await axios.get(\n      \"https://ajax.gogocdn.net/site/loadAjaxSearch?keyword=\" + val\n    );\n    d = d.data.content.replaceAll(\"category/\", \"/details/\");\n    var myList = [];\n    var $ = cheerio.load(d);\n    $(\"a\").each(function (index, element) {\n      let result = {};\n      let title = $(this).text();\n      let link = $(this).attr().href;\n      let image = $(this)\n        .children(\"div\")\n        .attr()\n        .style.slice(15)\n        .replace(/[(\"\")]/g, \"\");\n      result = { title, link, image };\n      myList.push(result);\n    });\n\n    setContent(myList);\n  };\n  const handleClick = () => {\n    var SearchBar = document.getElementById(\"search\");\n    var SearchInput = document.getElementById(\"searchinput\");\n    SearchInput.focus();\n    SearchInput.style.maxWidth = \"800px\";\n    SearchInput.style.marginLeft = \"0.7rem\";\n    SearchBar.style.width = \"auto\";\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    router.push(`/search/${val}/1`);\n    setContent([]);\n    setVal(\"\");\n  };\n  const theme = useSelector((state) => state.theme);\n  return (\n    <form className=\"absolute cursor-pointer right-0\" onSubmit={handleSubmit}>\n      <div\n        className={`${theme.button.background} ${theme.button.text} h-10 w-10  rounded-full flex  p-2.5 shadow-2xl relative right-0`}\n        id=\"search\"\n        onClick={handleClick}\n      >\n        <FaSearch size={20} />\n        <input\n          value={val}\n          autoComplete={\"off\"}\n          onChange={handleSearch}\n          className={`${theme.button.background} ${theme.button.text} border-none outline-none max-w-0 ease-in-out transition-all duration-700`}\n          placeholder=\"Search for anime...\"\n          id=\"searchinput\"\n        />\n        {content.length > 0 && (\n          <div\n            className={` autocomplete absolute left-0 px-1 py-0 top-11 shadow-2xl transition-all duration-200 rounded-xl ${theme.button.text} w-full ${theme.button.background}`}\n          >\n            {content?.map((Item, index) => (\n              <Link href={Item.link} key={index}>\n                <div\n                  className={`flex shadow-xl w-full justify-between cursor-pointer p-2 rounded-xl my-1 text-right ${theme.text.selected} ${theme.background}`}\n                  onClick={() => setContent([])}\n                >\n                  <div className=\"rounded-full h-10 w-10 \">\n                    <img\n                      src={Item.image}\n                      className=\"w-10 h-10 object-cover rounded-full\"\n                      alt={Item.title}\n                    />\n                  </div>\n                  <span className=\"w-3/4\">{Item.title}</span>\n                </div>\n              </Link>\n            ))}\n          </div>\n        )}\n      </div>\n    </form>\n  );\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}